"0","hc <-"
"0","  hc %>% "
"0","  left_join("
"0","    readxl::read_xlsx(dates_file) %>%"
"0","      mutate("
"0","        ID = as.integer(ID)"
"0","      ),"
"0","    by = ""ID"""
"0","  ) %>% "
"0","  group_by(ID) %>% "
"0","  mutate("
"0","    weeks_preg = 40 - ((date_t1_hair %--% baby_duedate) / weeks(1)), #gestational weeks at time of collection"
"0","    weeks_preg = if_else("
"0","      timepoint == ""newborn"","
"0","      40 + ((baby_dob %--% date_t2_hair) / weeks(1)), weeks_preg"
"0","    ),"
"0","    weeks_preg_birth = 40 + (baby_dob %--% baby_duedate) / weeks(1), #gestational age of baby at time of birth"
"0","    seg_week = case_when("
"0","      segment == 1 ~ weeks_preg,"
"0","      segment == 2 ~ weeks_preg - 4,"
"0","      segment == 3 ~ weeks_preg - 8,"
"0","      segment == 4 ~ weeks_preg - 12,"
"0","      segment == 5 ~ weeks_preg - 16"
"0","    ),"
"0","    trimester =  case_when("
"0","      seg_week <= 12 ~ ""First"","
"0","      seg_week > 12 & seg_week <= 26 ~ ""Second"","
"0","      seg_week > 26 ~ ""Third"""
"0","    ),"
"0","    MDD_pastcurr = recode("
"0","      MDD,"
"0","      ""past"" = ""past/current"","
"0","      ""current"" = ""past/current"","
"0","      ""subclinical"" = ""past/current"","
"0","      ""current + past"" = ""past/current"","
"0","      ""current+past"" = ""past/current"","
"0","      ""none"" = ""none"","
"0","      .default = NA_character_"
"0","    )"
"0","  ) %>% "
"0","  filter(seg_week > 0, (seg_week <= weeks_preg_birth | is.na(weeks_preg_birth))) %>% #filter to only include values covering pregnancy"
"0","  ungroup()"
"0","hc %>% "
"0","  filter(segment == 1, timepoint == ""pregnancy"") %>% "
"0","  summarise("
"0","    mean_weeks = mean(weeks_preg, na.rm = TRUE),"
"0","    sd_weeks = sd(weeks_preg, na.rm = TRUE),"
"0","    min_weeks = min(weeks_preg, na.rm = TRUE),"
"0","    max_weeks = max(weeks_preg, na.rm = TRUE)"
"0","  )"
